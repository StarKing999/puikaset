<!DOCTYPE html>
<html lang="th" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡πÄ‡∏ä‡∏¥‡∏á‡πÇ‡∏ï‡πâ‡∏ï‡∏≠‡∏ö</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', sans-serif;
        }
        /* Chart.js containers for responsive scaling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Limits chart width on larger screens */
            margin-left: auto;
            margin-right: auto;
            height: 320px; /* Fixed height for consistent chart display */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        /* Active state for tab buttons */
        .tab-button.active {
            background-color: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }
        /* Loading spinner animation */
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Custom scrollbar for better aesthetics and usability */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="bg-[#F9F7F3] text-[#4A4A4A]">

    <!-- Header -->
    <header class="bg-[#6B8E23] text-white p-4 shadow-md sticky top-0 z-10">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold mb-2 md:mb-0">üåø ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û</h1>
            <nav class="flex flex-wrap justify-center gap-2 md:gap-4">
                <a href="#intro" class="px-3 py-2 text-sm md:text-base hover:bg-[#8FBC8F] rounded-md transition-colors duration-200">‡∏ö‡∏ó‡∏ô‡∏≥</a>
                <a href="#recipes" class="px-3 py-2 text-sm md:text-base hover:bg-[#8FBC8F] rounded-md transition-colors duration-200">‡∏™‡∏π‡∏ï‡∏£‡∏õ‡∏∏‡πã‡∏¢</a>
                <a href="#charts" class="px-3 py-2 text-sm md:text-base hover:bg-[#8FBC8F] rounded-md transition-colors duration-200">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
                <a href="#apply" class="px-3 py-2 text-sm md:text-base hover:bg-[#8FBC8F] rounded-md transition-colors duration-200">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a>
                 <a href="#ai-tools" class="px-3 py-2 text-sm md:text-base hover:bg-[#8FBC8F] rounded-md transition-colors duration-200">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ AI</a>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 lg:p-12">

        <!-- Section 1: Introduction -->
        <section id="intro" class="text-center mb-16 pt-16">
            <h2 class="text-3xl sm:text-4xl font-bold text-[#556B2F] mb-4">‡∏õ‡∏è‡∏¥‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏î‡πâ‡∏ß‡∏¢‡∏û‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥</h2>
            <p class="max-w-3xl mx-auto text-base md:text-lg text-gray-700">‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ú‡∏•‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï ‡πÅ‡∏•‡∏∞‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏∏‡∏î‡∏°‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏î‡∏¥‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô</p>
            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-6 px-4 sm:px-0">
                <div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-[#4CAF50] hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                    <h3 class="text-xl sm:text-2xl font-bold text-[#4CAF50] mb-2">üí∞ ‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô</h3>
                    <p class="mt-2 text-sm md:text-base">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πã‡∏¢‡πÄ‡∏Ñ‡∏°‡∏µ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏´‡∏≤‡∏®‡∏≤‡∏•‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-[#DAA520] hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                    <h3 class="text-xl sm:text-2xl font-bold text-[#DAA520] mb-2">üåç ‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π‡∏î‡∏¥‡∏ô</h3>
                    <p class="mt-2 text-sm md:text-base">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏¥‡∏ô‡∏£‡πà‡∏ß‡∏ô‡∏ã‡∏∏‡∏¢ ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏ô‡∏î‡∏¥‡∏ô</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border-l-4 border-[#20B2AA] hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                    <h3 class="text-xl sm:text-2xl font-bold text-[#20B2AA] mb-2">üåæ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï</h3>
                    <p class="mt-2 text-sm md:text-base">‡∏û‡∏∑‡∏ä‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ï‡πâ‡∏≤‡∏ô‡∏ó‡∏≤‡∏ô‡πÇ‡∏£‡∏Ñ ‡πÉ‡∏´‡πâ‡∏ú‡∏•‡∏ú‡∏•‡∏¥‡∏ï‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Interactive Recipe Hub -->
        <section id="recipes" class="mb-16 pt-16">
            <h2 class="text-2xl sm:text-3xl font-bold text-center text-[#556B2F] mb-8">‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏£‡∏ß‡∏°‡∏™‡∏π‡∏ï‡∏£‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û</h2>
            <div class="max-w-5xl mx-auto bg-white rounded-xl shadow-2xl overflow-hidden">
                <div class="p-4 sm:p-8">
                     <!-- Tabs for fertilizer type -->
                    <div class="flex flex-wrap justify-center border-b mb-6 gap-2">
                        <button class="tab-button text-base sm:text-lg font-semibold py-2 px-4 sm:py-3 sm:px-6 border-b-4 border-transparent hover:border-gray-300 active rounded-t-lg transition-colors duration-200" onclick="showTab('liquid')">‡∏õ‡∏∏‡πã‡∏¢‡∏ô‡πâ‡∏≥ (‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å)</button>
                        <button class="tab-button text-base sm:text-lg font-semibold py-2 px-4 sm:py-3 sm:px-6 border-b-4 border-transparent hover:border-gray-300 rounded-t-lg transition-colors duration-200" onclick="showTab('dry')">‡∏õ‡∏∏‡πã‡∏¢‡πÅ‡∏´‡πâ‡∏á (‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å)</button>
                    </div>

                    <!-- Liquid Fertilizer Content -->
                    <div id="liquid-content" class="tab-content">
                        <p class="text-center mb-6 text-sm md:text-base">‡∏õ‡∏∏‡πã‡∏¢‡∏ô‡πâ‡∏≥‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ò‡∏≤‡∏ï‡∏∏‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏∑‡∏ä‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏ö‡πÅ‡∏•‡∏∞‡∏£‡∏î‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô</p>
                       
                        <div class="bg-gray-100 rounded-lg p-4 sm:p-6">
                             <h4 class="text-lg sm:text-xl font-semibold mb-4 text-center">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h4>
                             <div class="flex flex-col md:flex-row justify-around items-center space-y-4 md:space-y-0 md:space-x-4">
                                 <div class="text-center">
                                     <div class="text-3xl sm:text-4xl mb-2">üî™</div>
                                     <p class="text-sm md:text-base">1. ‡∏´‡∏±‡πà‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</p>
                                 </div>
                                 <div class="text-green-600 text-xl sm:text-2xl font-bold">‚Üí</div>
                                 <div class="text-center">
                                     <div class="text-3xl sm:text-4xl mb-2">üçØ</div>
                                     <p class="text-sm md:text-base">2. ‡∏ú‡∏™‡∏°‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•</p>
                                    </div>
                                    <div class="text-green-600 text-xl sm:text-2xl font-bold">‚Üí</div>
                                 <div class="text-center">
                                     <div class="text-3xl sm:text-4xl mb-2">üè∫</div>
                                     <p class="text-sm md:text-base">3. ‡∏´‡∏°‡∏±‡∏Å‡πÉ‡∏ô‡∏ñ‡∏±‡∏á‡∏ó‡∏∂‡∏ö</p>
                                    </div>
                                    <div class="text-green-600 text-xl sm:text-2xl font-bold">‚Üí</div>
                                 <div class="text-center">
                                     <div class="text-3xl sm:text-4xl mb-2">üíß</div>
                                     <p class="text-sm md:text-base">4. ‡∏Å‡∏£‡∏≠‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ</p>
                                 </div>
                             </div>
                        </div>

                         <div class="mt-6">
                            <label for="liquid-recipe-select" class="block text-base md:text-lg font-medium mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å:</label>
                            <select id="liquid-recipe-select" class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-[#4CAF50] focus:border-[#4CAF50] text-sm md:text-base">
                                <option value="basic">‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ/‡∏ú‡∏±‡∏Å)</option>
                                <option value="egg">‡∏™‡∏π‡∏ï‡∏£‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡πÑ‡∏Ç‡πà</option>
                                <option value="flower">‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡∏î‡∏≠‡∏Å-‡∏ú‡∏• (‡∏ô‡πâ‡∏≥‡∏û‡πà‡∏≠)</option>
                                <option value="leaf">‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡πÉ‡∏ö-‡∏£‡∏≤‡∏Å (‡∏ô‡πâ‡∏≥‡πÅ‡∏°‡πà)</option>
                                <option value="pest">‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏•‡πà‡πÅ‡∏°‡∏•‡∏á</option>
                            </select>
                        </div>
                        <div id="liquid-recipe-details" class="mt-4 p-4 border rounded-md bg-green-50 border-green-200 min-h-[150px] text-sm md:text-base">
                            <!-- JS will populate this -->
                        </div>
                    </div>

                    <!-- Dry Fertilizer Content -->
                    <div id="dry-content" class="tab-content hidden">
                           <p class="text-center mb-6 text-sm md:text-base">‡∏õ‡∏∏‡πã‡∏¢‡∏´‡∏°‡∏±‡∏Å‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡∏¥‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ ‡πÅ‡∏•‡∏∞‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ò‡∏≤‡∏ï‡∏∏‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏¢‡∏∞‡∏¢‡∏≤‡∏ß</p>
                           
                           <div class="bg-gray-100 rounded-lg p-4 sm:p-6">
                                 <h4 class="text-lg sm:text-xl font-semibold mb-4 text-center">‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏õ‡∏∏‡πã‡∏¢‡πÄ‡∏Ñ‡∏°‡∏µ</h4>
                                 <p class="mb-4 text-sm md:text-base">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏õ‡∏∏‡πã‡∏¢‡πÄ‡∏Ñ‡∏°‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏à‡∏≤‡∏Å‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ú‡∏•‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏°‡∏≤‡∏Å</p>
                                 <select id="dry-recipe-select" class="w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-[#DAA520] focus:border-[#DAA520] text-sm md:text-base">
                                    <option value="16-16-16">‡∏™‡∏π‡∏ï‡∏£ 16-16-16 (‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</option>
                                    <option value="13-13-21">‡∏™‡∏π‡∏ï‡∏£ 13-13-21 (‡πÄ‡∏£‡πà‡∏á‡∏´‡∏ß‡∏≤‡∏ô/‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡∏•)</option>
                                    <option value="16-20-0">‡∏™‡∏π‡∏ï‡∏£ 16-20-0 (‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï)</option>
                                </select>
                                <div id="dry-recipe-details" class="mt-4 p-4 border rounded-md bg-yellow-50 border-yellow-200 min-h-[100px] text-sm md:text-base">
                                    <!-- JS will populate this -->
                                </div>
                           </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Interactive Charts -->
        <section id="charts" class="mb-16 pt-16">
             <h2 class="text-2xl sm:text-3xl font-bold text-center text-[#556B2F] mb-8">‡∏™‡∏≥‡∏£‡∏ß‡∏à‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</h2>
             <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 px-4 sm:px-0">
                <div class="bg-white p-6 rounded-lg shadow-xl hover:shadow-2xl transition-shadow duration-300">
                    <h3 class="text-xl sm:text-2xl font-semibold text-center mb-4">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ò‡∏≤‡∏ï‡∏∏‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å (N-P-K)</h3>
                    <div class="chart-container">
                        <canvas id="nutrientChart"></canvas>
                    </div>
                    <p class="text-xs sm:text-sm text-gray-600 mt-4 text-center">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏∞‡∏¢‡∏∞</p>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-xl hover:shadow-2xl transition-shadow duration-300">
                    <h3 class="text-xl sm:text-2xl font-semibold text-center mb-4">‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏û‡∏∑‡∏ä</h3>
                    <div class="chart-container">
                        <canvas id="hormoneChart"></canvas>
                    </div>
                     <p class="text-xs sm:text-sm text-gray-600 mt-4 text-center">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä‡∏ï‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</p>
                </div>
             </div>
        </section>

         <!-- Section 4: Application Guide -->
        <section id="apply" class="mb-16 pt-16">
             <h2 class="text-2xl sm:text-3xl font-bold text-center text-[#556B2F] mb-8">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ</h2>
             <div class="max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-2xl">
                 <h3 class="text-xl sm:text-2xl font-semibold mb-4">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πã‡∏¢‡∏ô‡πâ‡∏≥‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û</h3>
                 <div class="overflow-x-auto rounded-lg border border-gray-200">
                    <table class="w-full text-left text-sm md:text-base">
                        <thead class="bg-gray-100">
                            <tr>
                                <th class="p-3 font-semibold">‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå</th>
                                <th class="p-3 font-semibold">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô (‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å:‡∏ô‡πâ‡∏≥)</th>
                                <th class="p-3 font-semibold">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b"><td class="p-3">‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏û‡∏∑‡∏ä‡πÉ‡∏ö‡∏≠‡πà‡∏≠‡∏ô/‡∏ú‡∏±‡∏Å</td><td class="p-3 font-mono">1:500</td><td class="p-3">‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡∏ó‡∏≤‡∏á‡πÉ‡∏ö</td></tr>
                            <tr class="border-b bg-green-50"><td class="p-3">‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡πÑ‡∏°‡πâ‡∏ú‡∏•/‡πÑ‡∏°‡πâ‡πÉ‡∏ö‡∏´‡∏ô‡∏≤</td><td class="p-3 font-mono">1:200</td><td class="p-3">‡∏£‡∏î‡πÇ‡∏Ñ‡∏ô‡∏ï‡πâ‡∏ô/‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô</td></tr>
                            <tr class="border-b"><td class="p-3">‡∏Å‡∏≥‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ä‡∏û‡∏∑‡∏ä</td><td class="p-3 font-mono">1:10 (+‡πÄ‡∏Å‡∏•‡∏∑‡∏≠)</td><td class="p-3">‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á</td></tr>
                            <tr class="bg-green-50"><td class="p-3">‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏Ñ‡∏≠‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå</td><td class="p-3 font-mono">1:100</td><td class="p-3">‡∏£‡∏≤‡∏î/‡∏â‡∏µ‡∏î‡∏û‡πà‡∏ô</td></tr>
                        </tbody>
                    </table>
                 </div>

                 <h3 class="text-xl sm:text-2xl font-semibold mt-8 mb-4">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πã‡∏¢‡πÅ‡∏´‡πâ‡∏á</h3>
                 <p class="text-sm md:text-base">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏õ‡∏∏‡πã‡∏¢‡πÅ‡∏´‡πâ‡∏á‡∏à‡∏∞‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä ‡πÄ‡∏ä‡πà‡∏ô **‡∏ô‡∏≤‡∏Ç‡πâ‡∏≤‡∏ß** ‡πÉ‡∏ä‡πâ 100 ‡∏Å‡∏Å./‡πÑ‡∏£‡πà ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏î‡∏¥‡∏ô, **‡πÑ‡∏°‡πâ‡∏ú‡∏•** ‡πÉ‡∏ä‡πâ 1-3 ‡∏Å‡∏Å./‡∏ï‡πâ‡∏ô ‡∏£‡∏≠‡∏á‡∏Å‡πâ‡∏ô‡∏´‡∏•‡∏∏‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ß‡πà‡∏≤‡∏ô‡∏£‡∏≠‡∏ö‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏°, **‡∏û‡∏∑‡∏ä‡∏ú‡∏±‡∏Å** ‡πÉ‡∏ä‡πâ 1 ‡∏Å‡∏Å./‡∏ï‡∏£.‡∏°. ‡∏ï‡∏≠‡∏ô‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÅ‡∏õ‡∏•‡∏á</p>
             </div>
        </section>

         <!-- Section 5: AI-Powered Tools -->
        <section id="ai-tools" class="mb-16 pt-16">
            <h2 class="text-2xl sm:text-3xl font-bold text-center text-[#556B2F] mb-8">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞‡∏à‡∏≤‡∏Å Gemini AI</h2>
            <div class="max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-2xl grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Feature 1: Recipe Suggestion -->
                <div>
                    <h3 class="text-xl sm:text-2xl font-semibold text-[#6B8E23] mb-4">‚ú® ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏π‡∏ï‡∏£‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</h3>
                    <p class="text-sm md:text-base text-gray-700 mb-4">‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å ‡∏ú‡∏•‡πÑ‡∏°‡πâ ‡∏õ‡∏•‡∏≤ ‡∏´‡∏≠‡∏¢‡πÄ‡∏ä‡∏≠‡∏£‡∏µ‡πà ‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏π‡∏ï‡∏£‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</p>
                    <textarea id="ingredientsInput" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#6B8E23] mb-4 text-sm md:text-base" rows="4" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πâ‡∏ß‡∏¢, ‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠, ‡πÄ‡∏®‡∏©‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á, ‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•, ‡∏õ‡∏•‡∏≤, ‡∏ô‡πâ‡∏≥‡∏™‡∏∞‡∏≠‡∏≤‡∏î"></textarea>
                    <button id="getRecipeBtn" class="w-full py-3 px-6 rounded-md text-white font-semibold bg-[#6B8E23] hover:bg-[#556B2F] transition-colors flex items-center justify-center text-sm md:text-base">
                        ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏π‡∏ï‡∏£ ‚ú®
                        <span id="recipeLoadingSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="recipeOutput" class="mt-4 p-4 bg-green-50 rounded-md text-green-900 border border-green-200 hidden text-sm md:text-base"></div>
                </div>

                <!-- Feature 2: Troubleshooting -->
                <div>
                    <h3 class="text-xl sm:text-2xl font-semibold text-[#DAA520] mb-4">‚ú® ‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏õ‡∏∏‡πã‡∏¢</h3>
                    <p class="text-sm md:text-base text-gray-700 mb-4">‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏õ‡∏∏‡πã‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ü‡∏≠‡∏á ‡∏°‡∏µ‡∏£‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</p>
                    <textarea id="troubleInput" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#DAA520] mb-4 text-sm md:text-base" rows="4" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÄ‡∏´‡∏°‡πá‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡πâ‡∏¢‡∏ß‡∏°‡∏≤‡∏Å ‡∏°‡∏µ‡πÄ‡∏°‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô"></textarea>
                    <button id="getTroubleshootBtn" class="w-full py-3 px-6 rounded-md text-white font-semibold bg-[#DAA520] hover:bg-[#B8860B] transition-colors flex items-center justify-center text-sm md:text-base">
                        ‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‚ú®
                        <span id="troubleLoadingSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <div id="troubleOutput" class="mt-4 p-4 bg-yellow-50 rounded-md text-yellow-900 border border-yellow-200 hidden text-sm md:text-base"></div>
                </div>
            </div>
        </section>

         <!-- Section 6: Resources -->
        <section id="resources" class="text-center bg-gradient-to-r from-[#8FBC8F] to-[#6B8E23] text-white py-10 sm:py-12 px-4 rounded-lg shadow-lg">
            <h2 class="text-2xl sm:text-3xl font-bold mb-4">‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h2>
            <p class="max-w-2xl mx-auto mb-6 text-sm md:text-base">‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå ‡∏û‡∏î. ‡∏ä‡∏ô‡∏¥‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ü‡∏£‡∏µ! ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏ñ‡∏≤‡∏ô‡∏µ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡∏ó‡∏∏‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏≥‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡∏ï‡∏ó‡∏±‡πà‡∏ß‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</p>
            <a href="https://www.ldd.go.th/" target="_blank" class="inline-block bg-white text-[#556B2F] font-bold py-2 px-6 sm:py-3 sm:px-8 rounded-full hover:bg-gray-200 transition-colors duration-300 transform hover:scale-105 shadow-md">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô</a>
        </section>

    </main>

    <footer class="text-center p-6 text-gray-500 text-xs sm:text-sm mt-8">
        <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡πÑ‡∏ó‡∏¢ | ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const liquidRecipeData = {
            basic: {
                title: '‡∏™‡∏π‡∏ï‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ/‡∏ú‡∏±‡∏Å)',
                desc: '‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏û‡∏∑‡∏ä‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏ó‡∏≥‡∏á‡πà‡∏≤‡∏¢ ‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢',
                ingredients: ['‡∏ú‡∏•‡πÑ‡∏°‡πâ/‡∏ú‡∏±‡∏Å‡∏™‡∏î: 3 ‡∏™‡πà‡∏ß‡∏ô', '‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•: 1 ‡∏™‡πà‡∏ß‡∏ô', '‡∏ô‡πâ‡∏≥‡∏™‡∏∞‡∏≠‡∏≤‡∏î: 10 ‡∏™‡πà‡∏ß‡∏ô', '‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)']
            },
            egg: {
                title: '‡∏™‡∏π‡∏ï‡∏£‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡πÑ‡∏Ç‡πà',
                desc: '‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏û‡∏∑‡∏ä‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡πà‡∏ß‡∏á‡∏ï‡∏¥‡∏î‡∏î‡∏≠‡∏Å‡∏≠‡∏≠‡∏Å‡∏ú‡∏•',
                ingredients: ['‡πÑ‡∏Ç‡πà‡πÑ‡∏Å‡πà: 1 ‡∏Å‡∏Å.', '‡∏´‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πâ‡∏≠‡∏à‡∏∏‡∏•‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡πÄ‡∏´‡∏á‡πâ‡∏≤‡∏Å‡∏•‡πâ‡∏ß‡∏¢: 1 ‡∏•‡∏¥‡∏ï‡∏£', '‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•: 1 ‡∏•‡∏¥‡∏ï‡∏£', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏û‡∏£‡πâ‡∏≤‡∏ß‡∏≠‡πà‡∏≠‡∏ô: 2 ‡∏•‡∏π‡∏Å', '‡∏•‡∏π‡∏Å‡πÅ‡∏õ‡πâ‡∏á: 1 ‡∏•‡∏π‡∏Å']
            },
            flower: {
                title: '‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡∏î‡∏≠‡∏Å-‡∏ú‡∏• (‡∏ô‡πâ‡∏≥‡∏û‡πà‡∏≠)',
                desc: '‡∏≠‡∏∏‡∏î‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏à‡∏¥‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏•‡∏•‡∏¥‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏î‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ú‡∏•',
                ingredients: ['‡∏ü‡∏±‡∏Å‡∏ó‡∏≠‡∏á: 1 ‡∏Å‡∏Å.', '‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠‡∏™‡∏∏‡∏Å: 1 ‡∏Å‡∏Å.', '‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏ß‡πâ‡∏≤: 1 ‡∏Å‡∏Å.', '‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•: 1 ‡∏Å‡∏Å.', '‡∏ô‡πâ‡∏≥: 10 ‡∏•‡∏¥‡∏ï‡∏£']
            },
            leaf: {
                title: '‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡πÉ‡∏ö-‡∏Å‡∏¥‡πà‡∏á-‡∏£‡∏≤‡∏Å (‡∏ô‡πâ‡∏≥‡πÅ‡∏°‡πà)',
                desc: '‡∏≠‡∏∏‡∏î‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÑ‡∏ã‡πÇ‡∏ï‡πÑ‡∏Ñ‡∏ô‡∏¥‡∏ô ‡∏ä‡πà‡∏ß‡∏¢‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡πÉ‡∏ö ‡∏Å‡∏¥‡πà‡∏á ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Å',
                ingredients: ['‡∏û‡∏∑‡∏ä‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß (‡∏ú‡∏±‡∏Å, ‡∏´‡∏ç‡πâ‡∏≤, ‡∏ñ‡∏±‡πà‡∏ß): 3 ‡∏Å‡∏Å.', '‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•: 1 ‡∏Å‡∏Å.', '‡∏ô‡πâ‡∏≥: 10 ‡∏•‡∏¥‡∏ï‡∏£']
            },
            pest: {
                title: '‡∏™‡∏π‡∏ï‡∏£‡πÑ‡∏•‡πà‡πÅ‡∏°‡∏•‡∏á',
                desc: '‡πÉ‡∏ä‡πâ‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏â‡∏∏‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏™‡∏Ç‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡∏ö‡πÑ‡∏•‡πà‡πÅ‡∏°‡∏•‡∏á‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏û‡∏∑‡∏ä',
                ingredients: ['‡∏™‡∏°‡∏∏‡∏ô‡πÑ‡∏û‡∏£ (‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏∞‡πÄ‡∏î‡∏≤, ‡∏Ç‡πà‡∏≤, ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ‡∏´‡∏≠‡∏°): 3 ‡∏™‡πà‡∏ß‡∏ô', '‡∏Å‡∏≤‡∏Å‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•: 1 ‡∏™‡πà‡∏ß‡∏ô', '‡∏ô‡πâ‡∏≥: 10 ‡∏™‡πà‡∏ß‡∏ô', '‡πÄ‡∏´‡∏•‡πâ‡∏≤‡∏Ç‡∏≤‡∏ß/‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°‡∏™‡∏≤‡∏¢‡∏ä‡∏π (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á‡∏Ç‡∏∂‡πâ‡∏ô)']
            }
        };

        const dryRecipeData = {
            '16-16-16': {
                desc: '‡∏™‡∏π‡∏ï‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡∏û‡∏∑‡∏ä‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï',
                ratio: '‡∏£‡∏≥‡∏≠‡πà‡∏≠‡∏ô : ‡∏î‡∏¥‡∏ô‡∏î‡∏µ : ‡πÅ‡∏Å‡∏•‡∏ö‡∏î‡∏¥‡∏ö : ‡πÅ‡∏Å‡∏•‡∏ö‡∏î‡∏≥ : ‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå : ‡∏û‡∏∑‡∏ä‡∏ï‡∏£‡∏∞‡∏Å‡∏π‡∏•‡∏ñ‡∏±‡πà‡∏ß',
                parts: '1 : 1 : 1 : 1 : 1 : 1'
            },
            '13-13-21': {
                desc: '‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏ß‡∏≤‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡∏• ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÑ‡∏°‡πâ‡∏ú‡∏•‡∏ä‡πà‡∏ß‡∏á‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß',
                ratio: '(‡πÅ‡∏Å‡∏•‡∏ö‡∏î‡∏¥‡∏ö, ‡πÅ‡∏Å‡∏•‡∏ö‡∏î‡∏≥, ‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå, ‡∏û‡∏∑‡∏ä‡∏ï‡∏£‡∏∞‡∏Å‡∏π‡∏•‡∏ñ‡∏±‡πà‡∏ß) ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°‡∏≠‡∏∑‡πà‡∏ô',
                parts: '‡∏ß‡∏±‡∏™‡∏î‡∏∏ K ‡∏™‡∏π‡∏á : ‡∏≠‡∏∑‡πà‡∏ô‡πÜ = 2 : 1'
            },
            '16-20-0': {
                desc: '‡∏™‡∏π‡∏ï‡∏£‡πÄ‡∏£‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏•‡∏∞‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏≤‡∏Å ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡∏ä‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏£‡∏Å‡∏õ‡∏•‡∏π‡∏Å',
                ratio: '(‡∏î‡∏¥‡∏ô, ‡πÅ‡∏Å‡∏•‡∏ö, ‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå, ‡∏û‡∏∑‡∏ä‡∏ï‡∏£‡∏∞‡∏Å‡∏π‡∏•‡∏ñ‡∏±‡πà‡∏ß) ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 2-4 ‡πÄ‡∏ó‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡∏≥‡∏≠‡πà‡∏≠‡∏ô',
                parts: '‡∏ß‡∏±‡∏™‡∏î‡∏∏ P ‡∏™‡∏π‡∏á : ‡∏≠‡∏∑‡πà‡∏ô‡πÜ = 4 : 1'
            }
        };
       
        const liquidRecipeSelect = document.getElementById('liquid-recipe-select');
        const liquidRecipeDetails = document.getElementById('liquid-recipe-details');
        const dryRecipeSelect = document.getElementById('dry-recipe-select');
        const dryRecipeDetails = document.getElementById('dry-recipe-details');

        function updateLiquidRecipe() {
            const selected = liquidRecipeSelect.value;
            const data = liquidRecipeData[selected];
            liquidRecipeDetails.innerHTML = `
                <h4 class="text-base font-semibold text-green-800">${data.title}</h4>
                <p class="text-green-700 mb-2">${data.desc}</p>
                <ul class="list-disc list-inside text-green-900">
                    ${data.ingredients.map(item => `<li>${item}</li>`).join('')}
                </ul>
            `;
        }
       
        function updateDryRecipe() {
            const selected = dryRecipeSelect.value;
            const data = dryRecipeData[selected];
            dryRecipeDetails.innerHTML = `
                <h4 class="text-base font-semibold text-yellow-800">${data.desc}</h4>
                <p class="text-yellow-700 mt-2"><strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°:</strong> ${data.ratio}</p>
                <p class="text-yellow-700"><strong>‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô:</strong> ${data.parts}</p>
            `;
        }

        liquidRecipeSelect.addEventListener('change', updateLiquidRecipe);
        dryRecipeSelect.addEventListener('change', updateDryRecipe);
       
        updateLiquidRecipe();
        updateDryRecipe();

        // Function to show/hide tabs
        window.showTab = (tabName) => {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
            document.getElementById(`${tabName}-content`).classList.remove('hidden');
           
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.querySelector(`button[onclick="showTab('${tabName}')"]`).classList.add('active');
        };

        // Chart.js default options for responsiveness and font
        const chartDefaultOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom', labels: { font: { family: "'Kanit', sans-serif" } } },
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            return Array.isArray(label) ? label.join(' ') : label;
                        }
                    }
                }
            },
            scales: {
                x: { ticks: { font: { family: "'Kanit', sans-serif" } } },
                y: { ticks: { font: { family: "'Kanit', sans-serif" } }, beginAtZero: true }
            }
        };

        // Nutrient Chart
        const nutrientCtx = document.getElementById('nutrientChart').getContext('2d');
        new Chart(nutrientCtx, {
            type: 'bar',
            data: {
                labels: ['‡∏õ‡∏•‡∏≤', '‡∏ú‡∏±‡∏Å', '‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏£‡∏ß‡∏°', '‡∏´‡∏≠‡∏¢‡πÄ‡∏ä‡∏≠‡∏£‡∏µ‡πà'],
                datasets: [
                    { label: 'N (%)', data: [0.98, 0.14, 0.27, 0.35], backgroundColor: '#8FBC8F' },
                    { label: 'P (%)', data: [1.12, 0.30, 0.05, 0.25], backgroundColor: '#6B8E23' },
                    { label: 'K (%)', data: [1.03, 0.40, 0.67, 0.85], backgroundColor: '#556B2F' }
                ]
            },
            options: chartDefaultOptions
        });

        // Hormone Chart
        const hormoneCtx = document.getElementById('hormoneChart').getContext('2d');
        new Chart(hormoneCtx, {
            type: 'bar',
            data: {
                labels: ['‡∏õ‡∏•‡∏≤/‡∏´‡∏≠‡∏¢', '‡∏ú‡∏•‡πÑ‡∏°‡πâ', '‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°'],
                datasets: [
                    { label: '‡∏≠‡∏≠‡∏Å‡∏ã‡∏¥‡∏ô (‡πÄ‡∏£‡πà‡∏á‡∏£‡∏≤‡∏Å)', data: [4.01, 0.27, 1.41], backgroundColor: '#F0E68C' },
                    { label: '‡∏à‡∏¥‡∏ö‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏•‡∏•‡∏¥‡∏ô (‡πÄ‡∏£‡πà‡∏á‡∏î‡∏≠‡∏Å/‡∏ú‡∏•)', data: [33.07, 28.93, 1.20], backgroundColor: '#DAA520' },
                    { label: '‡πÑ‡∏ã‡πÇ‡∏ï‡πÑ‡∏Ñ‡∏ô‡∏¥‡∏ô (‡πÄ‡∏£‡πà‡∏á‡πÉ‡∏ö)', data: [3.05, 11.28, 12.01], backgroundColor: '#B8860B' }
                ]
            },
            options: {
                ...chartDefaultOptions,
                scales: {
                    ...chartDefaultOptions.scales,
                    y: { ...chartDefaultOptions.scales.y, title: { display: true, text: '‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì (mg/ml)', font: { family: "'Kanit', sans-serif" } } }
                }
            }
        });

        // AI Feature 1: Recipe Suggestion
        const getRecipeBtn = document.getElementById('getRecipeBtn');
        const ingredientsInput = document.getElementById('ingredientsInput');
        const recipeOutput = document.getElementById('recipeOutput');
        const recipeLoadingSpinner = document.getElementById('recipeLoadingSpinner');

        getRecipeBtn.addEventListener('click', async () => {
            const ingredients = ingredientsInput.value;
            recipeOutput.innerHTML = '';
            recipeOutput.classList.add('hidden');
            recipeLoadingSpinner.classList.remove('hidden'); // Show spinner

            if (!ingredients.trim()) {
                recipeOutput.innerHTML = '<p class="text-red-500">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ</p>';
                recipeOutput.classList.remove('hidden');
                recipeLoadingSpinner.classList.add('hidden'); // Hide spinner
                return;
            }

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏°‡∏µ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏î‡∏±‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ: ${ingredients} ‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏™‡∏π‡∏ï‡∏£‡∏ô‡πâ‡∏≥‡∏´‡∏°‡∏±‡∏Å‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û 1-2 ‡∏™‡∏π‡∏ï‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡∏ä‡∏ä‡∏ô‡∏¥‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏£‡∏∞‡∏ä‡∏±‡∏ö ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡πÑ‡∏ó‡∏¢` }] });
                const payload = { contents: chatHistory };
                // API key will be provided by the environment
                const apiKey = "AIzaSyD-AQ-1RhSL4r7Oal20wF4n6qkeXAfnpm8"; // Leave as empty string. Canvas will provide this.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    recipeOutput.innerHTML = `<p>${text}</p>`;
                } else {
                    recipeOutput.innerHTML = '<p class="text-red-500">‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>';
                }
            } catch (error) {
                console.error('Error fetching recipe:', error);
                recipeOutput.innerHTML = '<p class="text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: ' + error.message + '</p>';
            } finally {
                recipeLoadingSpinner.classList.add('hidden'); // Hide spinner
                recipeOutput.classList.remove('hidden');
            }
        });

        // AI Feature 2: Troubleshooting
        const getTroubleshootBtn = document.getElementById('getTroubleshootBtn');
        const troubleInput = document.getElementById('troubleInput');
        const troubleOutput = document.getElementById('troubleOutput');
        const troubleLoadingSpinner = document.getElementById('troubleLoadingSpinner');

        getTroubleshootBtn.addEventListener('click', async () => {
            const problem = troubleInput.value;
            troubleOutput.innerHTML = '';
            troubleOutput.classList.add('hidden');
            troubleLoadingSpinner.classList.remove('hidden'); // Show spinner

            if (!problem.trim()) {
                troubleOutput.innerHTML = '<p class="text-red-500">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö</p>';
                troubleOutput.classList.remove('hidden');
                troubleLoadingSpinner.classList.add('hidden'); // Hide spinner
                return;
            }

            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏±‡∏Å‡∏õ‡∏∏‡πã‡∏¢‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ: ${problem} ‡πÇ‡∏õ‡∏£‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2-3 ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£‡πÑ‡∏ó‡∏¢` }] });
                const payload = { contents: chatHistory };
                // API key will be provided by the environment
                const apiKey = "AIzaSyD-AQ-1RhSL4r7Oal20wF4n6qkeXAfnpm8"; // Leave as empty string. Canvas will provide this.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    troubleOutput.innerHTML = `<p>${text}</p>`;
                } else {
                    troubleOutput.innerHTML = '<p class="text-red-500">‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>';
                }
            } catch (error) {
                console.error('Error fetching troubleshoot advice:', error);
                troubleOutput.innerHTML = '<p class="text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: ' + error.message + '</p>';
            } finally {
                troubleLoadingSpinner.classList.add('hidden'); // Hide spinner
                troubleOutput.classList.remove('hidden');
            }
        });
    });
    </script>
</body>
</html>
